pipeline {
    agent any
 
    stages {
        stage('Test') {
            steps {
                withMaven (traceability: true,
                maven: 'maven'){
                    sh "mvn clean compile test"
                }
            }
 
            post {                
                // If Maven was able to run the tests, even if some of the test
                // failed, record the test results and archive the jar file.
                always {
                    allure includeProperties: false, 
                    jdk: '', 
                    results: [[path: 'src/target/allure-results']]    
                }               
            }
        }

        
    }
}